<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Python on Wang's Blog</title><link>https://wastu01.github.io/categories/python/</link><description>Recent content in Python on Wang's Blog</description><generator>Hugo -- gohugo.io</generator><language>zh-tw</language><copyright>版權 Wang</copyright><lastBuildDate>Fri, 27 Oct 2023 10:37:31 +0800</lastBuildDate><atom:link href="https://wastu01.github.io/categories/python/index.xml" rel="self" type="application/rss+xml"/><item><title>Tesseract 使用 安裝 訓練</title><link>https://wastu01.github.io/article/python-tesseract-ocr/</link><pubDate>Fri, 27 Oct 2023 10:37:31 +0800</pubDate><guid>https://wastu01.github.io/article/python-tesseract-ocr/</guid><description>&lt;img src="https://i.imgur.com/ORSlEI8.png" alt="Featured image of post Tesseract 使用 安裝 訓練" />&lt;p>&lt;kbd>python&lt;/kbd> &lt;kbd>tessract&lt;/kbd> &lt;kbd>ocr&lt;/kbd> &lt;kbd>辨識文字&lt;/kbd>&lt;/p>
&lt;h1 id="tesseract-使用安裝訓練">Tesseract 使用＆安裝＆訓練&lt;/h1>
&lt;h2 id="簡單驗證碼去噪-灰度二值化">簡單驗證碼去噪 灰度二值化&lt;/h2>
&lt;p>無意間找到網址是固定的 教育部某平台之簡易驗證碼&lt;/p>
&lt;p>&lt;img src="https://i.imgur.com/xBEiIlt.png"
loading="lazy"
>&lt;/p>
&lt;p>雖然可以爬好幾10xxx張，但是看了資訊安全政策好像會被 ban
所以弄了一個驗證碼產生器，自製訓練庫，好處是可自定義演算法，本機端即可儲存圖片。&lt;/p>
&lt;p>實際操作畫面如下：&lt;/p>
&lt;p>&lt;img src="https://i.imgur.com/ORSlEI8.png"
loading="lazy"
>&lt;/p>
&lt;p>&amp;mdash; 工商服務板塊 &amp;mdash;&lt;/p>
&lt;script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-9854600345673328"
crossorigin="anonymous">&lt;/script>
&lt;ins class="adsbygoogle"
style="display:block; text-align:center;"
data-ad-layout="in-article"
data-ad-format="fluid"
data-ad-client="ca-pub-9854600345673328"
data-ad-slot="8624326011">&lt;/ins>
&lt;script>
(adsbygoogle = window.adsbygoogle || []).push({});
&lt;/script>
&lt;hr>
&lt;p>人工智慧課堂企劃報告，老師說明 OCR 這個目前由 Google 維護的識別引擎，用途為辨識掃描的文件/圖片中的文字，提供實務上業界的應用，掃描健檢報告數據，將數據存入資料庫。&lt;/p>
&lt;p>我們這組的想法是應用於農民可拍照上傳產品外包裝編號查看農藥用途。&lt;/p>
&lt;p>實做起來遇到一些問題微調操作&lt;/p>
&lt;p>所以做個紀錄有了這篇筆記整理 📝&lt;/p>
&lt;h2 id="安裝-tessract--語言包">安裝 Tessract / 語言包&lt;/h2>
&lt;p>安裝環境： MacOS&lt;/p>
&lt;p>Homebrew 安裝&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">homebrew install tesseract
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;a class="link" href="https://formulae.brew.sh/formula/tesseract" target="_blank" rel="noopener"
>https://formulae.brew.sh/formula/tesseract&lt;/a>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">homebrew install tesseract-lang
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;a class="link" href="https://formulae.brew.sh/formula/tesseract-lang" target="_blank" rel="noopener"
>https://formulae.brew.sh/formula/tesseract-lang&lt;/a>&lt;/p>
&lt;p>語言包一次打包 / 需要的再匯入&lt;/p>
&lt;p>位置大概是這邊：&lt;code>/usr/local/Cellar/tesseract/4.x/share/tessdata&lt;/code>&lt;/p>
&lt;h2 id="編譯安裝問題">編譯安裝問題&lt;/h2>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">Error: invalid option: --with-training-tools
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>要安裝訓練模型時，發現 tesseract
最新4.x版本 homebrew 沒有訓練模型相關指令&lt;/p>
&lt;p>撰寫文章當下根據網路文章
找到了解決方法需自行編譯 build,make install&lt;/p>
&lt;p>&lt;strong>參考下列文章（感謝文章作者）&lt;/strong>&lt;/p>
&lt;p>&lt;a class="link" href="https://juejin.im/post/6844904097863188487" target="_blank" rel="noopener"
>https://juejin.im/post/6844904097863188487&lt;/a>&lt;/p>
&lt;h2 id="可下載-python-的相關模組">可下載 &lt;code>python&lt;/code> 的相關模組&lt;/h2>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="n">pip&lt;/span> &lt;span class="n">install&lt;/span> &lt;span class="n">pillow&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">pip&lt;/span> &lt;span class="n">install&lt;/span> &lt;span class="n">pytesseract&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://i.imgur.com/Jk2wQ7i.png"
loading="lazy"
>&lt;/p>
&lt;p>詳細教學：&lt;/p>
&lt;p>&lt;a class="link" href="https://lufor129.medium.com/pytesseract-" target="_blank" rel="noopener"
>https://lufor129.medium.com/pytesseract-&lt;/a>辨識圖片中的文字-b1024f678fac&lt;/p>
&lt;p>&lt;a class="link" href="https://blog.csdn.net/huitailangyz/article/details/80390090" target="_blank" rel="noopener"
>https://blog.csdn.net/huitailangyz/article/details/80390090&lt;/a>&lt;/p>
&lt;h2 id="查看安裝版本">查看安裝版本&lt;/h2>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="n">tesseract&lt;/span> &lt;span class="mf">4.1.1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">leptonica&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">1.80.0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">libgif&lt;/span> &lt;span class="mf">5.2.1&lt;/span> &lt;span class="p">:&lt;/span> &lt;span class="n">libjpeg&lt;/span> &lt;span class="mi">9&lt;/span>&lt;span class="n">d&lt;/span> &lt;span class="p">:&lt;/span> &lt;span class="n">libpng&lt;/span> &lt;span class="mf">1.6.37&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">:&lt;/span> &lt;span class="n">libtiff&lt;/span> &lt;span class="mf">4.1.0&lt;/span> &lt;span class="p">:&lt;/span> &lt;span class="n">zlib&lt;/span> &lt;span class="mf">1.2.11&lt;/span> &lt;span class="p">:&lt;/span> &lt;span class="n">libwebp&lt;/span> &lt;span class="mf">1.1.0&lt;/span> &lt;span class="p">:&lt;/span> &lt;span class="n">libopenjp2&lt;/span> &lt;span class="mf">2.3.1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Found&lt;/span> &lt;span class="n">AVX2&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Found&lt;/span> &lt;span class="n">AVX&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Found&lt;/span> &lt;span class="n">FMA&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Found&lt;/span> &lt;span class="n">SSE&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://i.imgur.com/HVS8rMt.png"
loading="lazy"
>&lt;/p>
&lt;h2 id="參數設定">參數設定&lt;/h2>
&lt;p>列出可使用的語言包&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="n">tesseract&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="nb">list&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">langs&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ul>
&lt;li>
&lt;p>chi_tra 繁體&lt;/p>
&lt;/li>
&lt;li>
&lt;p>chi_tra_vert 繁體，直排&lt;/p>
&lt;/li>
&lt;li>
&lt;p>-l 辨識語言 / 預設是英文 default &amp;ldquo;eng&amp;rdquo;&lt;/p>
&lt;/li>
&lt;/ul>
&lt;hr>
&lt;p>設定圖片辨識引擎&lt;/p>
&lt;ul>
&lt;li>&amp;ndash;oem ： OCR Engine modes, 演算法類型 / 目前沒了解這塊用預設&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">tesseract --help-oem
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">OCR Engine modes:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 0 Legacy engine only.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 1 Neural nets LSTM engine only.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 2 Legacy + LSTM engines.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 3 Default, based on what is available.
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>參考文章解釋:&lt;/p>
&lt;p>为了识别包含单个字符的图像，我们通常使用卷积神经网络(CNN)。
任意长度的文本是一系列字符，这类问题可以通过RNNs解决，LSTM是RNN的一种常用形式&lt;/p>
&lt;p>&lt;img src="https://i.imgur.com/TdxEkRl.png"
loading="lazy"
>&lt;/p>
&lt;hr>
&lt;h2 id="psm-判別語句類型模式">PSM 判別語句類型模式&lt;/h2>
&lt;ul>
&lt;li>&amp;ndash;psm : 判別語句類型模式 / 大陸翻譯：自动页面分割模式&lt;/li>
&lt;/ul>
&lt;p>常用說明&lt;/p>
&lt;ul>
&lt;li>0：定向脚本监测（OSD）&lt;/li>
&lt;li>1： 使用OSD自动分页&lt;/li>
&lt;li>2 ：自动分页，但是不使用OSD或OCR&lt;/li>
&lt;li>3 ：全自动分页，但是没有使用OSD（默认）&lt;/li>
&lt;li>4 ：假设可变大小的一个文本列。&lt;/li>
&lt;li>5 ：假设垂直对齐文本的单个统一块。&lt;/li>
&lt;li>6 ：假设一个统一的文本块。&lt;/li>
&lt;/ul>
&lt;ul>
&lt;li>&lt;input checked="" disabled="" type="checkbox"> 7 ：將圖片視為一行文字句子。&lt;/li>
&lt;li>&lt;input checked="" disabled="" type="checkbox"> 8 ：將圖片視為一個『單字』。&lt;/li>
&lt;li>&lt;input checked="" disabled="" type="checkbox"> 9 ：將圖像視為『環狀字』。&lt;/li>
&lt;li>&lt;input checked="" disabled="" type="checkbox"> 10 ：將圖片視為一個『字母』。&lt;/li>
&lt;/ul>
&lt;p>參數不懂的沿用參考文章簡體中文翻譯&lt;/p>
&lt;p>PSM 參數詳細說明：
&lt;a class="link" href="https://pyimagesearch.com/2021/11/15/tesseract-page-segmentation-modes-psms-explained-how-to-improve-your-ocr-accuracy/" target="_blank" rel="noopener"
>https://pyimagesearch.com/2021/11/15/tesseract-page-segmentation-modes-psms-explained-how-to-improve-your-ocr-accuracy/&lt;/a>&lt;/p>
&lt;h2 id="辨識效果測試">辨識效果測試&lt;/h2>
&lt;p>執行畫面：&lt;/p>
&lt;p>&lt;img src="https://i.imgur.com/Us8mDqc.png"
loading="lazy"
>&lt;/p>
&lt;p>&lt;img src="https://i.imgur.com/Q6Vdk25.png"
loading="lazy"
>&lt;/p>
&lt;p>簡易驗證碼：&lt;/p>
&lt;p>&lt;img src="https://i.imgur.com/SVxpeYZ.png"
loading="lazy"
>&lt;/p>
&lt;p>較複雜驗證碼：
登入系統驗證碼&lt;/p>
&lt;p>&lt;img src="https://i.imgur.com/ScpJvjH.png"
loading="lazy"
>&lt;/p>
&lt;p>線條干擾誤判斷成 - 符號&lt;/p>
&lt;h2 id="圖片預處理--提升辨識度">圖片預處理 / 提升辨識度&lt;/h2>
&lt;p>再來就是要測試一些更難辨識的照片跟訓練了&lt;/p>
&lt;p>官方文檔解釋：
&lt;a class="link" href="https://tesseract-ocr.github.io/tessdoc/ImproveQuality.html#image-processing" target="_blank" rel="noopener"
>https://tesseract-ocr.github.io/tessdoc/ImproveQuality.html#image-processing&lt;/a>&lt;/p>
&lt;p>每個Image都有不同的標記，
需要乾淨能夠辨識標記的物件&lt;/p>
&lt;p>OpenCV 套件預先處理圖片&lt;/p>
&lt;p>辨識原則：&lt;/p>
&lt;ul>
&lt;li>至少為300 DPI為最佳&lt;/li>
&lt;li>白底黑字，字體清晰&lt;/li>
&lt;li>去噪，灰度图二值化&lt;/li>
&lt;/ul>
&lt;p>轉灰度原理：&lt;/p>
&lt;p>&lt;img src="https://i.imgur.com/z4wqhcP.png"
loading="lazy"
>&lt;/p>
&lt;p>mode 取值可為下列幾種&lt;/p>
&lt;p>其中會用到的為 1 . L&lt;/p>
&lt;p>imgry.mode
binary.mode&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="err">·&lt;/span> &lt;span class="mi">1&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">bit&lt;/span> &lt;span class="n">pixels&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">black&lt;/span> &lt;span class="ow">and&lt;/span> &lt;span class="n">white&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">stored&lt;/span> &lt;span class="k">with&lt;/span> &lt;span class="n">one&lt;/span> &lt;span class="n">pixel&lt;/span> &lt;span class="n">per&lt;/span> &lt;span class="n">byte&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">·&lt;/span> &lt;span class="n">L&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="mi">8&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">bit&lt;/span> &lt;span class="n">pixels&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">black&lt;/span> &lt;span class="ow">and&lt;/span> &lt;span class="n">white&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">·&lt;/span> &lt;span class="n">P&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="mi">8&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">bit&lt;/span> &lt;span class="n">pixels&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">mapped&lt;/span> &lt;span class="n">to&lt;/span> &lt;span class="nb">any&lt;/span> &lt;span class="n">other&lt;/span> &lt;span class="n">mode&lt;/span> &lt;span class="n">using&lt;/span> &lt;span class="n">a&lt;/span> &lt;span class="n">colour&lt;/span> &lt;span class="n">palette&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">·&lt;/span> &lt;span class="n">RGB&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="mi">3&lt;/span>&lt;span class="n">x8&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">bit&lt;/span> &lt;span class="n">pixels&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">true&lt;/span> &lt;span class="n">colour&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">·&lt;/span> &lt;span class="n">RGBA&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="mi">4&lt;/span>&lt;span class="n">x8&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">bit&lt;/span> &lt;span class="n">pixels&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">true&lt;/span> &lt;span class="n">colour&lt;/span> &lt;span class="k">with&lt;/span> &lt;span class="n">transparency&lt;/span> &lt;span class="n">mask&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">·&lt;/span> &lt;span class="n">CMYK&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="mi">4&lt;/span>&lt;span class="n">x8&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">bit&lt;/span> &lt;span class="n">pixels&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">colour&lt;/span> &lt;span class="n">separation&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">·&lt;/span> &lt;span class="n">YCbCr&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="mi">3&lt;/span>&lt;span class="n">x8&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">bit&lt;/span> &lt;span class="n">pixels&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">colour&lt;/span> &lt;span class="n">video&lt;/span> &lt;span class="nb">format&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">·&lt;/span> &lt;span class="n">I&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="mi">32&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">bit&lt;/span> &lt;span class="n">signed&lt;/span> &lt;span class="n">integer&lt;/span> &lt;span class="n">pixels&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">·&lt;/span> &lt;span class="n">F&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="mi">32&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">bit&lt;/span> &lt;span class="n">floating&lt;/span> &lt;span class="n">point&lt;/span> &lt;span class="n">pixels&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>opencv :&lt;/p>
&lt;p>&lt;a class="link" href="https://lufor129.medium.com/pytesseract-" target="_blank" rel="noopener"
>https://lufor129.medium.com/pytesseract-&lt;/a>辨識圖片中的文字-b1024f678fac&lt;/p>
&lt;p>常見錯誤：
&lt;a class="link" href="https://zhuanlan.zhihu.com/p/35590364" target="_blank" rel="noopener"
>https://zhuanlan.zhihu.com/p/35590364&lt;/a>&lt;/p>
&lt;p>套件記得載
&lt;img src="https://i.imgur.com/Qr4oQwf.png"
loading="lazy"
>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># opencv 方式讀取圖檔轉灰度&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">imgcv&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">cv2&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">imread&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;CaptchaImage.jpg&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">cv2&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">IMREAD_GRAYSCALE&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">type&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">imgcv&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">cv2&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">imshow&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;CaptchaImage&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">imgcv&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">cv2&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">imwrite&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;output/gray05.tiff&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">imgcv&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">cv2&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">waitKey&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">cv2&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">destroyAllWindows&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>cv2.threshold 常用參數&lt;/p>
&lt;ol>
&lt;li>cv2.THRESH_BINARY（黑白兩值）&lt;/li>
&lt;li>cv2.THRESH_BINARY_INV（黑白二值反轉）&lt;/li>
&lt;li>cv2.THRESH_TRUNC （得到的圖像為多像素值）
尚待釐清 多像素值定義&lt;/li>
&lt;/ol>
&lt;p>灰度轉二值化(去噪):&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span> &lt;span class="s1">&amp;#39;binary mode: &amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">binary&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">mode&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span> &lt;span class="n">binary&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">getpixel&lt;/span>&lt;span class="p">((&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">co&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">binary&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">getcolors&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span> &lt;span class="n">co&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">#輸出&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">----------------------------------------&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">binary&lt;/span> &lt;span class="n">mode&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="mi">0&lt;/span> &lt;span class="c1">#左上角為黑色&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">[(&lt;/span>&lt;span class="mi">503&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="mi">1993&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">)]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">共有幾個黑與白像素點&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>判斷文字位置：&lt;/p>
&lt;p>&lt;a class="link" href="https://youtu.be/6DjFscX4I_c?t=502" target="_blank" rel="noopener"
>https://youtu.be/6DjFscX4I_c?t=502&lt;/a>&lt;/p>
&lt;p>訓練文字辨識，手動標註&lt;/p>
&lt;h2 id="jtessboxeditor--vietocr-45">jTessBoxEditor / VietOCR-4.5&lt;/h2>
&lt;p>手動標記｜工人智慧&lt;/p>
&lt;p>下載位置：&lt;/p>
&lt;p>&lt;a class="link" href="https://sourceforge.net/projects/vietocr/" target="_blank" rel="noopener"
>https://sourceforge.net/projects/vietocr/&lt;/a>&lt;/p>
&lt;p>軟體資訊：&lt;/p>
&lt;p>&lt;img src="https://i.imgur.com/LcyLe83.png"
loading="lazy"
>&lt;/p>
&lt;h2 id="使用語法總覽">使用語法總覽&lt;/h2>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">Usage:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> tesseract --help | --help-extra | --version
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> tesseract --list-langs
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> tesseract imagename outputbase [options...] [configfile...]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">OCR options:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> -l LANG[+LANG] Specify language(s) used for OCR.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NOTE: These options must occur before any configfile.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Single options:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> --help Show this help message.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> --help-extra Show extra help for advanced users.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> --version Show version information.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> --list-langs List available languages for tesseract engine.
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;hr>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">Page segmentation modes:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 0 Orientation and script detection (OSD) only.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 1 Automatic page segmentation with OSD.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 2 Automatic page segmentation, but no OSD, or OCR. (not implemented)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 3 Fully automatic page segmentation, but no OSD. (Default)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 4 Assume a single column of text of variable sizes.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 5 Assume a single uniform block of vertically aligned text.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 6 Assume a single uniform block of text.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 7 Treat the image as a single text line.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 8 Treat the image as a single word.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 9 Treat the image as a single word in a circle.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 10 Treat the image as a single character.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 11 Sparse text. Find as much text as possible in no particular order.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 12 Sparse text with OSD.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 13 Raw line. Treat the image as a single text line,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> bypassing hacks that are Tesseract-specific.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">OCR Engine modes:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 0 Legacy engine only.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 1 Neural nets LSTM engine only.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 2 Legacy + LSTM engines.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 3 Default, based on what is available.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Single options:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> -h, --help Show minimal help message.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> --help-extra Show extra help for advanced users.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> --help-psm Show page segmentation modes.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> --help-oem Show OCR Engine modes.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> -v, --version Show version information.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> --list-langs List available languages for tesseract engine.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> --print-parameters Print tesseract parameters.
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>未完待續，下方整理了一些相關文章，有興趣的同學可以參考。&lt;/p>
&lt;h2 id="參考文章">參考文章&lt;/h2>
&lt;p>簡單的製作驗證碼範例：
&lt;a class="link" href="https://ithelp.ithome.com.tw/articles/10159457" target="_blank" rel="noopener"
>https://ithelp.ithome.com.tw/articles/10159457&lt;/a>&lt;/p>
&lt;p>[ 實用心得 ] Tesseract-OCR&lt;/p>
&lt;blockquote>
&lt;p>&lt;a class="link" href="https://medium.com/@b98606021/%e5%af%a6%e7%94%a8%e5%bf%83%e5%be%97-tesseract-ocr-eef4fcd425f0" target="_blank" rel="noopener"
>https://medium.com/@b98606021/實用心得-tesseract-ocr&lt;/a>&lt;/p>
&lt;/blockquote>
&lt;p>mac上文字识别(Tesseract-OCR for mac )&lt;/p>
&lt;blockquote>
&lt;p>&lt;a class="link" href="https://blog.csdn.net/u010670689/article/details/78374623" target="_blank" rel="noopener"
>https://blog.csdn.net/u010670689/article/details/78374623&lt;/a>&lt;/p>
&lt;/blockquote>
&lt;p>Image Processing in OpenCV&lt;/p>
&lt;blockquote>
&lt;p>&lt;a class="link" href="https://opencv-python-tutroals.readthedocs.io/en/latest/py_tutorials/py_imgproc/py_thresholding/py_thresholding.html#thresholding" target="_blank" rel="noopener"
>Image Thresholding&lt;/a>&lt;/p>
&lt;/blockquote>
&lt;p>使用Tesseract训练lang文件并OCR识别集装箱号&lt;/p>
&lt;blockquote>
&lt;p>&lt;a class="link" href="https://www.jianshu.com/p/5f847d8089ce" target="_blank" rel="noopener"
>https://www.jianshu.com/p/5f847d8089ce&lt;/a>&lt;/p>
&lt;/blockquote>
&lt;p>Tesseract-OCR 實現光學漢字識別（語言包解釋）&lt;/p>
&lt;blockquote>
&lt;p>&lt;a class="link" href="https://www.itread01.com/content/1577329506.html" target="_blank" rel="noopener"
>https://www.itread01.com/content/1577329506.html&lt;/a>&lt;/p>
&lt;/blockquote>
&lt;p>python 读取、保存、二值化、灰度化图片+opencv处理图片的方法&lt;/p>
&lt;blockquote>
&lt;p>&lt;a class="link" href="https://blog.csdn.net/JohinieLi/article/details/69389980" target="_blank" rel="noopener"
>https://blog.csdn.net/JohinieLi/article/details/69389980&lt;/a>&lt;/p>
&lt;/blockquote>
&lt;p>設置限定詞（會降低識別率）&lt;/p>
&lt;p>tessdata/configs/digits 沒找到&lt;/p>
&lt;p>&lt;a class="link" href="https://blog.csdn.net/ADebugMan/article/details/100592200" target="_blank" rel="noopener"
>https://blog.csdn.net/ADebugMan/article/details/100592200&lt;/a>&lt;/p>
&lt;h2 id="檔案放置區">檔案放置區:&lt;/h2>
&lt;blockquote>
&lt;p>&lt;a class="link" href="https://medium.com/mr-wang/%e6%96%87%e5%ad%97%e8%be%a8%e8%ad%98%e5%af%a6%e4%bd%9c%e5%8f%8a%e9%80%86%e5%90%91%e8%a7%a3%e6%9e%90-e42078f50916" target="_blank" rel="noopener"
>Tesseract-OCR 辨識＆ 驗證碼分析及實作&lt;/a>&lt;/p>
&lt;/blockquote>
&lt;h2 id="圖片辨識結合自動回覆機器人">圖片辨識結合自動回覆機器人&lt;/h2>
&lt;p>&lt;img src="https://i.imgur.com/IxnKVer.png"
loading="lazy"
>&lt;/p>
&lt;p>&lt;a class="link" href="https://youtu.be/VZOmXhAzwrk" target="_blank" rel="noopener"
>&lt;/a>&lt;/p>
&lt;div class="video-wrapper">
&lt;iframe loading="lazy"
src="https://www.youtube.com/embed/VZOmXhAzwrk"
allowfullscreen
title="YouTube Video"
>
&lt;/iframe>
&lt;/div>
&lt;p>此為大學專案進行的學習成果&lt;/p>
&lt;p>如有發現任何參數錯誤，歡迎留言通知&lt;/p>
&lt;script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-9854600345673328"
crossorigin="anonymous">&lt;/script>
&lt;ins class="adsbygoogle"
style="display:block"
data-ad-client="ca-pub-9854600345673328"
data-ad-slot="8083030845"
data-ad-format="auto"
data-full-width-responsive="true">&lt;/ins>
&lt;script>
(adsbygoogle = window.adsbygoogle || []).push({});
&lt;/script></description></item><item><title>Python-爬取空氣品質-PM2.5-AQI</title><link>https://wastu01.github.io/article/python-pm25-aqi-opendata/</link><pubDate>Tue, 03 Oct 2023 00:00:00 +0000</pubDate><guid>https://wastu01.github.io/article/python-pm25-aqi-opendata/</guid><description>&lt;img src="https://wastu01.github.io/article/python-pm25-aqi-opendata/Air-Quality-Index-Data-Set-Introduction.png" alt="Featured image of post Python-爬取空氣品質-PM2.5-AQI" />&lt;br>
&lt;p>2023 更新： 更快的做法是命令 &lt;kbd>ChatGPT&lt;/kbd> 為 &lt;kbd>A.I&lt;/kbd> 程式導師
提問如何用 &lt;kbd>Python&lt;/kbd> 爬取 PM2.5，(或使用 AutoGPT 設定明確目標執行爬蟲)，接下來剩下來的時間思考如何應用在日常生活中，例如用折線圖呈現產出一天內空氣品質變化，結合 &lt;kbd>&lt;a class="link" href="https://ifttt.com" target="_blank" rel="noopener"
>IFTTT&lt;/a>&lt;/kbd> 超過多少會提醒用戶之類的，並將資料搜集彙整顯示趨勢圖，以供後續研究。&lt;/p>
&lt;p>實際案例應用：
新竹科學園區空氣品質監測網：
&lt;a class="link" href="https://hspair.sipa.gov.tw/Hspairpeople/Default.aspx" target="_blank" rel="noopener"
>https://hspair.sipa.gov.tw/Hspairpeople/Default.aspx&lt;/a>&lt;/p>
&lt;p>將 &lt;code>json&lt;/code> 剖析用 &lt;a class="link" href="https://developers.google.com/chart?hl=en" target="_blank" rel="noopener"
>Google Chart&lt;/a> 畫出趨勢圖
&lt;img src="https://wastu01.github.io/article/python-pm25-aqi-opendata/%E7%A9%BA%E6%B0%A3%E5%93%81%E8%B3%AA%E7%9B%A3%E6%B8%AC%E7%B6%B2PM25%E8%B6%A8%E5%8B%A2%E5%9C%96.png"
width="2788"
height="1288"
srcset="https://wastu01.github.io/article/python-pm25-aqi-opendata/%E7%A9%BA%E6%B0%A3%E5%93%81%E8%B3%AA%E7%9B%A3%E6%B8%AC%E7%B6%B2PM25%E8%B6%A8%E5%8B%A2%E5%9C%96_hu1dde38d05d9bfef0f7b1ed5ecd267a20_299001_480x0_resize_box_3.png 480w, https://wastu01.github.io/article/python-pm25-aqi-opendata/%E7%A9%BA%E6%B0%A3%E5%93%81%E8%B3%AA%E7%9B%A3%E6%B8%AC%E7%B6%B2PM25%E8%B6%A8%E5%8B%A2%E5%9C%96_hu1dde38d05d9bfef0f7b1ed5ecd267a20_299001_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="216"
data-flex-basis="519px"
>&lt;/p>
&lt;p>實際案例教學:
&lt;a class="link" href="https://yanwei-liu.medium.com/pm2-5%E7%9A%84line%E6%A9%9F%E5%99%A8%E4%BA%BA-%E4%BD%BF%E7%94%A8python-ifttt-%E5%82%B3%E9%80%81%E6%9C%80%E6%96%B0pm2-5%E6%95%B8%E5%80%BC-b5655436363e" target="_blank" rel="noopener"
>PM2.5 的 Line 機器人：使用 Python + IFTTT 傳送最新 PM2.5 數值&lt;/a>&lt;/p>
&lt;p>Python 爬取空氣品質指標 ( AQI )：https://steam.oxxostudio.tw/category/python/spider/aqi.html&lt;/p>
&lt;hr>
&lt;p>課堂作業：爬取空氣品質 PM2.5 的即時資訊
抓取政府資料開放平台 &lt;code>JSON&lt;/code> 資料 並做檔案處理&lt;/p>
&lt;p>2022-04-29 更新：收到環保署資料開放平臺通知為提升 API 介接服務品質，平臺於 111 年 2 月 8 日更版，已更新第 2 版 API 資料介接功能，第 1 版 API 將於 5 月 19 日停止服務，為確保您的使用權益，歡迎至平臺重新註冊申請 API Key。所以有猜到下方 API Key 的可能日後也無法使用囉！&lt;/p>
&lt;p>2023-08026 更新：因工作緣故收到國家科學及技術委員會來函,配合本署組改為環境部，本署環境資料關放平臺、環境資源資料交換平臺及環境資源資料交換重構平臺自 112 年 8 月 22 日起變更網址及應用程式介面( Application ProgrammingInterface, API)，各平臺 API 維持新、舊 API URL 平行服務三個月，請於 112 年 11 月 22 日期限前內完成 API URL 更新。（白話文：API URL 規則有更改請更新）&lt;/p>
&lt;hr>
&lt;h1 id="執行畫面">執行畫面：&lt;/h1>
&lt;iframe height="900px" width="100%" src="https://repl.it/@wastu01/PM25?lite=true" scrolling="no" frameborder="no" allowtransparency="true" allowfullscreen="true" sandbox="allow-forms allow-pointer-lock allow-popups allow-same-origin allow-scripts allow-modals">&lt;/iframe>
&lt;h2 id="獲得資料方式">獲得資料方式&lt;/h2>
&lt;ul>
&lt;li>&lt;code>JSON&lt;/code> 格式：requests 獲取資料 python 直接解析&lt;/li>
&lt;/ul>
&lt;p>好用外掛工具 (chrome)：&lt;/p>
&lt;p>查看 Web API json 格式：
&lt;a class="link" href="https://chrome.google.com/webstore/detail/jsonview/chklaanhfefbnpoihckbnefhakgolnmc" target="_blank" rel="noopener"
>https://chrome.google.com/webstore/detail/jsonview/&lt;/a>&lt;/p>
&lt;hr>
&lt;p>資料格式 : JSON、CSV、XML&lt;/p>
&lt;p>Web API（Web Application Programming Interface）
&lt;a class="link" href="https://tw.alphacamp.co/blog/api-introduction-understand-web-api-http-json" target="_blank" rel="noopener"
>認識 Web API、HTTP 和 JSON 資料交換格式&lt;/a>&lt;/p>
&lt;h2 id="資訊擷取來源">資訊擷取來源&lt;/h2>
&lt;ul>
&lt;li>&lt;a class="link" href="https://data.gov.tw" target="_blank" rel="noopener"
>https://data.gov.tw/&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>&lt;img src="https://static.coderbridge.com/img/mrwang01/7f812f1495c2457dab774d63ba22ed78.png"
loading="lazy"
>&lt;/p>
&lt;p>後來發現有更好用 最新試行版(已正式上架)的&lt;/p>
&lt;p>&lt;a class="link" href="https://data.moenv.gov.tw/" target="_blank" rel="noopener"
>環保署環境資料開放平台開放資料 API&lt;/a>&lt;/p>
&lt;p>註冊 API Key 後可以篩選更多參數來撈資料&lt;/p>
&lt;p>要解析的 json 網址：&lt;/p>
&lt;ul>
&lt;li>&lt;a class="link" href="https://data.gov.tw/dataset/40448" target="_blank" rel="noopener"
>每小時提供各測站之空氣品質指標（AQI）&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://data.epa.gov.tw/api/v1/aqx_p_432?offset=0&amp;amp;limit=80&amp;amp;api_key=https://youtu.be/dQw4w9WgXcQ" target="_blank" rel="noopener"
>非公開 API 點擊無效&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>資料集名稱先記好比較快找到&lt;/p>
&lt;p>&lt;img src="https://data.epa.gov.tw/base/images/access_data_img_zh_02.png"
loading="lazy"
>&lt;/p>
&lt;p>註冊 API 使用說明：
&lt;a class="link" href="https://data.epa.gov.tw/paradigm" target="_blank" rel="noopener"
>https://data.epa.gov.tw/paradigm&lt;/a>&lt;/p>
&lt;h2 id="request-and-json">request and json&lt;/h2>
&lt;p>透過 &lt;code>json&lt;/code> 回傳的是一個 &lt;code>list&lt;/code>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="nn">requests&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">aqi_url&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;https://data.epa.gov.tw/api/v1/aqx_p_432?offset=0&amp;amp;limit=80&amp;amp;api_key=自行註冊&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 環保署環境資料開放平臺 試行版 https://data.epa.gov.tw/&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># API 金鑰免費申請 ～&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">response&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">requests&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">get&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">aqi_url&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">aqi&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">response&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">json&lt;/span>&lt;span class="p">()[&lt;/span>&lt;span class="s1">&amp;#39;records&amp;#39;&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">response&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">status_code&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">### 200  正常回傳&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">### 404 回傳錯誤&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nb">type&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">response&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nb">type&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">aqi&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://static.coderbridge.com/img/mrwang01/8f8cccef2a934901ac68b62e16c60b7a.png"
loading="lazy"
>&lt;/p>
&lt;h2 id="輸出-list">輸出 List&lt;/h2>
&lt;p>&lt;img src="https://static.coderbridge.com/img/mrwang01/92475ef8e70f465492ae72420bb458e5.png"
loading="lazy"
>&lt;/p>
&lt;h2 id="檔案處理">檔案處理&lt;/h2>
&lt;p>“r” 唯讀模式&lt;/p>
&lt;p>“w” 寫入模式（覆寫）&lt;/p>
&lt;p>“a” 寫入模式（續寫）&lt;/p>
&lt;p>&lt;code>with open(&amp;quot;data_pm25.txt&amp;quot;, &amp;quot;w&amp;quot;, encoding=&amp;quot;utf-8&amp;quot;) as file:&lt;/code>&lt;/p>
&lt;p>再用 for 把資料寫入 file 當中&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="n">f&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">open&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;file.txt&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;w&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">f&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">write&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;file-write&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">f&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">close&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="參考資料">參考資料&lt;/h2>
&lt;p>&lt;a class="link" href="https://medium.com/datainpoint/python-essentials/home" target="_blank" rel="noopener"
>輕鬆學習 Python | 資料分析&lt;/a>&lt;/p>
&lt;p>&lt;a class="link" href="https://medium.com/datainpoint/python-essentials-requesting-web-api-edd417a57ba5" target="_blank" rel="noopener"
>輕鬆學習 Python：透過 API 擷取網站資料&lt;/a>&lt;/p>
&lt;p>&lt;a class="link" href="https://medium.com/ccclub/ccclub-python-for-beginners-tutorial-bf0648108581" target="_blank" rel="noopener"
>Python 初學第十二講—檔案處理&lt;/a>&lt;/p>
&lt;p>補充：ChatGPT 指令大全
&lt;a class="link" href="https://www.explainthis.io/zh-hant/chatgpt" target="_blank" rel="noopener"
>https://www.explainthis.io/zh-hant/chatgpt&lt;/a>&lt;/p>
&lt;p>本篇原始文章：&lt;/p>
&lt;p>&lt;a class="link" href="https://index.coderbridge.io" target="_blank" rel="noopener"
>&lt;img src="https://avatars.githubusercontent.com/u/47618277?s=100&amp;amp;v=4"
loading="lazy"
alt="AQI"
>&lt;/a>&lt;/p></description></item></channel></rss>